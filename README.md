# C++ STL 笔记

《C++标准库》第二版代码记录，本书包括C++11的特性，但不包括其后的C++14、C++17、C++20、C++23。

这里仅注明一些比较重要的细节。

## STL错误处理

使用STL容器和算法时，必须时刻注意对容器迭代器的要求：
- 迭代器合法有效。
- 不能解引用尾后迭代器。
- 区间必须合法：指向同一容器、从第一个迭代器出发能够到达第二个迭代器。
- 涉及多个区间时，第二个区间必须至少与第一个区间一样长。
- 写入目标区间必须拥有足够元素，或者是使用的插入迭代器。

这些要求必须在使用STL的容器和算法时作为常识得到完全地保证。为了效率优先，STL的错误处理机制比较少，这些要求得不到满足时通常会导致运行时错误，并且大概率会破坏内存并且得不到有效的错误提示。可以在开发测试中使用安全版本的STL以提供错误提示：
- g++提供了`-D_GLIBCXX_DEBUG`选项，定义`_GLIBCXX_DEBUG`宏以开启STL错误检测。

